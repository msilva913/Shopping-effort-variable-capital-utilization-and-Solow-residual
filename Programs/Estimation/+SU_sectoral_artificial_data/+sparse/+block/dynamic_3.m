function [y, T, residual, g1] = dynamic_3(y, x, params, steady_state, sparse_rowval, sparse_colval, sparse_colptr, T)
residual=NaN(43, 1);
  T(1)=exp(params(3));
  y(151)=params(10)/2*(y(169)-T(1))^2;
  y(153)=params(10)/2*(y(171)-T(1))^2;
  T(2)=T(1)^params(1)/params(2)-1+1+params(11)/params(12)-T(1);
  y(148)=T(2)+(y(141)-1)*params(8)*T(2);
  y(149)=T(2)+(y(142)-1)*params(8)*T(2);
  y(150)=T(2)+(y(143)-1)*params(9)*T(2);
  y(111)=y(114)+y(112)+y(113);
  y(152)=params(10)/2*(y(170)-T(1))^2;
  T(3)=exp(y(130));
  T(4)=T(3)*y(157)^(1/params(17));
  T(5)=exp(y(131));
  residual(1)=(T(4)*T(5))-(params(16)*y(164)*y(111)/y(160));
  T(6)=exp(y(129))*(1-params(16))*params(13)/params(30)/(params(30)^(1/params(4))*params(7));
  residual(2)=(y(161))-(y(107)-params(15)*y(2)-T(3)*y(157)^(1+1/params(17))/(1+1/params(17))-y(124)^(1+1/params(4))*T(6)/(1+1/params(4)));
  T(7)=params(6)^(1-(params(5)-1)/params(5));
  T(8)=(1-params(6))^(1-(params(5)-1)/params(5));
  T(9)=T(7)*y(109)^((params(5)-1)/params(5))+T(8)*y(108)^((params(5)-1)/params(5));
  residual(3)=(y(107))-(T(9)^(1/((params(5)-1)/params(5))));
  T(10)=(1-params(16))*params(13)/(1+params(14));
  T(11)=params(16)^(params(17)/(1+params(17)));
  T(12)=params(18)/(T(11)*(1-params(6))*(1-params(11)))^params(16);
  T(13)=y(158)^params(16)*T(12);
  residual(4)=((1-params(16))*y(138)/y(162))-(T(10)*(y(108)+params(14)*(1-params(6))*(1-params(11))/params(18)*T(13))/y(120));
  T(14)=params(18)/(T(11)*params(6)*(1-params(11)))^params(16);
  T(15)=y(159)^params(16)*T(14);
  T(16)=y(109)+params(14)*params(6)*(1-params(11))/params(18)*T(15);
  residual(5)=((1-params(16))*y(138)/y(163))-(T(10)*T(16)/y(121));
  T(17)=params(18)/(params(11)*T(11))^params(16);
  T(18)=y(160)^params(16)*T(17);
  T(19)=y(111)+params(11)*params(14)/params(18)*T(18);
  residual(6)=((1-params(16))*y(139)/y(164))-(T(10)*T(19)/y(123));
  T(20)=exp(y(177));
  T(21)=params(12)*T(2)/(1+params(14));
  T(22)=T(20)*T(21);
  residual(7)=((1-params(16))*y(136)/y(163))-(T(16)*T(22)/(y(142)*y(12)));
  residual(8)=((1-params(16))*y(137)/y(164))-(T(19)*T(22)/(y(143)*y(13)));
  T(23)=(1-params(6))*y(162)^(-params(5));
  residual(9)=(y(108))-(y(107)*T(23));
  residual(10)=(y(122))-(y(120)+y(121));
  residual(11)=(y(165))-((1-params(16))*y(161)^(-params(1)));
  residual(12)=(y(157))-(y(158)+y(159)+T(5)*y(160));
  T(24)=(y(123)/y(124))^params(19);
  T(25)=params(7)*exp(y(134));
  T(26)=(1-(1-params(11)))^(-params(19));
  T(27)=y(124)^(1/params(4))*T(6);
  residual(13)=(T(26)*T(24)*T(27))-((1-params(16))*y(139)/T(25));
  residual(14)=(T(4))-(y(109)*params(16)*y(163)/y(159));
  residual(15)=(T(4))-(y(108)*params(16)*y(162)/y(158));
  T(28)=(y(122)/y(124))^params(19);
  T(29)=params(7)*exp(y(133));
  T(30)=(1-params(11))^(-params(19));
  residual(16)=(T(30)*T(28)*T(27))-((1-params(16))*y(138)/T(29));
  T(31)=y(122)^(1+params(19))*T(30)+y(123)^(1+params(19))*T(26);
  residual(17)=(y(124))-(T(31)^(1/(1+params(19))));
  residual(18)=(y(169))-(y(112)/y(7)*T(20));
  residual(19)=(y(170))-(T(20)*y(113)/y(8));
  residual(20)=(y(171))-(T(20)*y(114)/y(9));
  residual(21)=(T(20)*y(116))-(T(20)*y(112)*(1-y(151))+y(11)*(1-y(145)));
  residual(22)=(T(20)*y(117))-(T(20)*y(113)*(1-y(152))+y(12)*(1-y(146)));
  residual(23)=(T(20)*y(118))-(T(20)*y(114)*(1-y(153))+y(13)*(1-y(147)));
  T(32)=params(6)*y(163)^(-params(5));
  residual(24)=(y(109))-(y(107)*T(32));
  residual(25)=(y(154))-(params(10)*(y(169)-T(1)));
  residual(26)=(y(155))-(params(10)*(y(170)-T(1)));
  residual(27)=(y(156))-(params(10)*(y(171)-T(1)));
  residual(28)=(y(145))-(1+params(11)/params(12)-T(1)+(y(141)-1)*T(2)+(y(141)-1)^2*params(8)*T(2)/2);
  residual(29)=(y(146))-(1+params(11)/params(12)-T(1)+(y(142)-1)*T(2)+(y(142)-1)^2*params(8)*T(2)/2);
  residual(30)=(y(147))-(1+params(11)/params(12)-T(1)+(y(143)-1)*T(2)+(y(143)-1)^2*params(9)*T(2)/2);
  T(33)=params(2)*exp(y(132));
  T(34)=exp(y(282))^(-params(1));
  T(35)=T(33)*y(270)/y(165)*T(34);
  T(36)=y(274)^2;
  residual(31)=(y(164)/(1-params(16)))-(y(166)*(1-y(169)*y(154)-y(151))+T(35)*y(271)*y(259)*T(36));
  T(37)=y(275)^2;
  residual(32)=(y(164)/(1-params(16)))-(y(167)*(1-y(170)*y(155)-y(152))+T(35)*y(272)*y(260)*T(37));
  T(38)=y(276)^2;
  residual(33)=(y(164)/(1-params(16)))-(y(168)*(1-y(171)*y(156)-y(153))+T(35)*y(273)*y(261)*T(38));
  residual(34)=(y(166))-(T(35)*(y(240)*y(246)+y(271)*(1-y(250))));
  residual(35)=(y(167))-(T(35)*(y(241)*y(247)+y(272)*(1-y(251))));
  residual(36)=(y(168))-(T(35)*(y(242)*y(248)+y(273)*(1-y(252))));
  residual(37)=(y(148)*y(166))-(y(135));
  residual(38)=(y(149)*y(167))-(y(136));
  residual(39)=(y(150)*y(168))-(y(137));
  T(39)=exp(y(125));
  T(40)=y(120)^T(10);
  T(41)=T(1)^(-T(21));
  T(42)=T(20)^(-T(21));
  T(43)=T(39)*(params(14)*(1-params(6))*(1-params(11))/params(18)+(1-params(6))*(1-params(11))/params(18))/(T(41)*((1-params(6))*(1-params(11))*params(12)*T(1))^T(21)*((1-params(6))*(1-params(11))*params(30))^T(10))*T(42);
  T(44)=T(43)*(y(141)*y(11))^T(21);
  T(45)=T(40)*T(44)-params(14)*(1-params(6))*(1-params(11))/params(18);
  residual(40)=(y(108))-(T(13)*T(45));
  T(46)=y(121)^T(10);
  T(47)=T(39)*(params(14)*params(6)*(1-params(11))/params(18)+params(6)*(1-params(11))/params(18))/(T(41)*(params(6)*(1-params(11))*params(12)*T(1))^T(21)*(params(6)*(1-params(11))*params(30))^T(10))*T(42);
  T(48)=T(47)*(y(142)*y(12))^T(21);
  T(49)=T(46)*T(48)-params(14)*params(6)*(1-params(11))/params(18);
  residual(41)=(y(109))-(T(15)*T(49));
  T(50)=exp(y(127));
  T(51)=y(123)^T(10);
  T(52)=T(50)*(params(11)*params(14)/params(18)+params(11)/params(18))/(T(41)*(params(11)*params(12)*T(1))^T(21)*(params(11)*params(30))^T(10))*T(42);
  T(53)=T(52)*(y(143)*y(13))^T(21);
  T(54)=T(51)*T(53)-params(11)*params(14)/params(18);
  residual(42)=(y(111))-(T(18)*T(54));
  residual(43)=((1-params(16))*y(135)/y(162))-((y(108)+params(14)*(1-params(6))*(1-params(11))/params(18)*T(13))*T(22)/(y(141)*y(11)));
  T(55)=getPowerDeriv(T(9),1/((params(5)-1)/params(5)),1);
  T(56)=getPowerDeriv(y(141)*y(11),T(21),1);
  T(57)=getPowerDeriv(y(142)*y(12),T(21),1);
  T(58)=getPowerDeriv(y(143)*y(13),T(21),1);
  T(59)=getPowerDeriv(T(31),1/(1+params(19)),1);
  T(60)=getPowerDeriv(y(122)/y(124),params(19),1);
  T(61)=getPowerDeriv(y(123)/y(124),params(19),1);
  T(62)=T(6)*getPowerDeriv(y(124),1/params(4),1);
  T(63)=T(3)*getPowerDeriv(y(157),1/params(17),1);
  T(64)=T(12)*getPowerDeriv(y(158),params(16),1);
  T(65)=T(14)*getPowerDeriv(y(159),params(16),1);
  T(66)=params(14)*params(6)*(1-params(11))/params(18)*T(65);
  T(67)=T(17)*getPowerDeriv(y(160),params(16),1);
  T(68)=params(11)*params(14)/params(18)*T(67);
  T(69)=T(34)*T(33)*(-y(270))/(y(165)*y(165));
if nargout > 3
    g1_v = NaN(193, 1);
g1_v(1)=(-(T(20)*(-y(112))/(y(7)*y(7))));
g1_v(2)=(-(T(20)*(-y(113))/(y(8)*y(8))));
g1_v(3)=(-(T(20)*(-y(114))/(y(9)*y(9))));
g1_v(4)=(-(1-y(145)));
g1_v(5)=(-(T(13)*T(40)*T(43)*y(141)*T(56)));
g1_v(6)=(-((-(y(141)*(y(108)+params(14)*(1-params(6))*(1-params(11))/params(18)*T(13))*T(22)))/(y(141)*y(11)*y(141)*y(11))));
g1_v(7)=(-((-(y(142)*T(16)*T(22)))/(y(142)*y(12)*y(142)*y(12))));
g1_v(8)=(-(1-y(146)));
g1_v(9)=(-(T(15)*T(46)*T(47)*y(142)*T(57)));
g1_v(10)=(-((-(y(143)*T(19)*T(22)))/(y(143)*y(13)*y(143)*y(13))));
g1_v(11)=(-(1-y(147)));
g1_v(12)=(-(T(18)*T(51)*T(52)*y(143)*T(58)));
g1_v(13)=params(15);
g1_v(14)=T(5)*T(63);
g1_v(15)=T(3)*getPowerDeriv(y(157),1+1/params(17),1)/(1+1/params(17));
g1_v(16)=1;
g1_v(17)=T(63);
g1_v(18)=T(63);
g1_v(19)=T(6)*getPowerDeriv(y(124),1+1/params(4),1)/(1+1/params(4));
g1_v(20)=T(26)*(T(27)*T(61)*(-y(123))/(y(124)*y(124))+T(24)*T(62));
g1_v(21)=T(30)*(T(27)*T(60)*(-y(122))/(y(124)*y(124))+T(28)*T(62));
g1_v(22)=1;
g1_v(23)=(-(T(8)*getPowerDeriv(y(108),(params(5)-1)/params(5),1)*T(55)));
g1_v(24)=(-(T(10)/y(120)));
g1_v(25)=1;
g1_v(26)=(-(params(16)*y(162)/y(158)));
g1_v(27)=1;
g1_v(28)=(-(T(22)/(y(141)*y(11))));
g1_v(29)=(-((-(T(10)*(y(108)+params(14)*(1-params(6))*(1-params(11))/params(18)*T(13))))/(y(120)*y(120))));
g1_v(30)=(-1);
g1_v(31)=(-(T(13)*T(44)*getPowerDeriv(y(120),T(10),1)));
g1_v(32)=(-((1-params(16))*y(138)))/(y(163)*y(163));
g1_v(33)=(-((1-params(16))*y(136)))/(y(163)*y(163));
g1_v(34)=(-(params(16)*y(109)/y(159)));
g1_v(35)=(-(y(107)*params(6)*getPowerDeriv(y(163),(-params(5)),1)));
g1_v(36)=(-((-(T(10)*T(19)))/(y(123)*y(123))));
g1_v(37)=T(26)*T(27)*1/y(124)*T(61);
g1_v(38)=(-(T(59)*T(26)*getPowerDeriv(y(123),1+params(19),1)));
g1_v(39)=(-(T(18)*T(53)*getPowerDeriv(y(123),T(10),1)));
g1_v(40)=(-(T(10)*T(66)/y(121)));
g1_v(41)=(-(T(22)*T(66)/(y(142)*y(12))));
g1_v(42)=(-1);
g1_v(43)=(-((-(y(109)*params(16)*y(163)))/(y(159)*y(159))));
g1_v(44)=(-(T(49)*T(65)));
g1_v(45)=(-(params(16)*y(111)/y(160)));
g1_v(46)=(-((1-params(16))*y(139)))/(y(164)*y(164));
g1_v(47)=(-((1-params(16))*y(137)))/(y(164)*y(164));
g1_v(48)=1/(1-params(16));
g1_v(49)=1/(1-params(16));
g1_v(50)=1/(1-params(16));
g1_v(51)=(-((1-params(16))*y(138)))/(y(162)*y(162));
g1_v(52)=(-(y(107)*(1-params(6))*getPowerDeriv(y(162),(-params(5)),1)));
g1_v(53)=(-(params(16)*y(108)/y(158)));
g1_v(54)=(-((1-params(16))*y(135)))/(y(162)*y(162));
g1_v(55)=(-((-(T(10)*T(16)))/(y(121)*y(121))));
g1_v(56)=(-1);
g1_v(57)=(-(T(15)*T(48)*getPowerDeriv(y(121),T(10),1)));
g1_v(58)=1;
g1_v(59)=(-((1-params(16))*getPowerDeriv(y(161),(-params(1)),1)));
g1_v(60)=(-((-(params(16)*y(164)*y(111)))/(y(160)*y(160))));
g1_v(61)=(-(T(10)*T(68)/y(123)));
g1_v(62)=(-(T(22)*T(68)/(y(143)*y(13))));
g1_v(63)=(-T(5));
g1_v(64)=(-(T(54)*T(67)));
g1_v(65)=(1-params(16))/y(164);
g1_v(66)=(-((1-params(16))/T(25)));
g1_v(67)=(-(T(55)*T(7)*getPowerDeriv(y(109),(params(5)-1)/params(5),1)));
g1_v(68)=(-(T(10)/y(121)));
g1_v(69)=(-(T(22)/(y(142)*y(12))));
g1_v(70)=(-(params(16)*y(163)/y(159)));
g1_v(71)=1;
g1_v(72)=1;
g1_v(73)=(-(T(10)*params(14)*(1-params(6))*(1-params(11))/params(18)*T(64)/y(120)));
g1_v(74)=(-1);
g1_v(75)=(-((-(y(108)*params(16)*y(162)))/(y(158)*y(158))));
g1_v(76)=(-(T(45)*T(64)));
g1_v(77)=(-(T(22)*params(14)*(1-params(6))*(1-params(11))/params(18)*T(64)/(y(141)*y(11))));
g1_v(78)=(1-params(16))/y(162);
g1_v(79)=(1-params(16))/y(163);
g1_v(80)=(-((1-params(16))/T(29)));
g1_v(81)=1;
g1_v(82)=T(30)*T(27)*1/y(124)*T(60);
g1_v(83)=(-(T(30)*getPowerDeriv(y(122),1+params(19),1)*T(59)));
g1_v(84)=(-(params(16)*y(164)/y(160)));
g1_v(85)=(-(T(10)/y(123)));
g1_v(86)=(-(T(22)/(y(143)*y(13))));
g1_v(87)=(-(T(20)*1/y(7)));
g1_v(88)=(-(T(20)*(1-y(151))));
g1_v(89)=1;
g1_v(90)=(-(params(16)*y(164)/y(160)));
g1_v(91)=(-(T(10)/y(123)));
g1_v(92)=(-(T(22)/(y(143)*y(13))));
g1_v(93)=(-(T(20)*1/y(8)));
g1_v(94)=(-(T(20)*(1-y(152))));
g1_v(95)=1;
g1_v(96)=(-(params(16)*y(164)/y(160)));
g1_v(97)=(-(T(10)/y(123)));
g1_v(98)=(-(T(22)/(y(143)*y(13))));
g1_v(99)=(-(T(20)*1/y(9)));
g1_v(100)=(-(T(20)*(1-y(153))));
g1_v(101)=1;
g1_v(102)=T(20);
g1_v(103)=T(20);
g1_v(104)=T(20);
g1_v(105)=(-1);
g1_v(106)=1;
g1_v(107)=(-T(23));
g1_v(108)=(-T(32));
g1_v(109)=1;
g1_v(110)=(-(y(166)*(-y(169))));
g1_v(111)=1;
g1_v(112)=(-(y(167)*(-y(170))));
g1_v(113)=1;
g1_v(114)=(-(y(168)*(-y(171))));
g1_v(115)=y(11);
g1_v(116)=1;
g1_v(117)=y(12);
g1_v(118)=1;
g1_v(119)=y(13);
g1_v(120)=1;
g1_v(121)=1;
g1_v(122)=(-(T(20)*y(112)*(-(params(10)/2*2*(y(169)-T(1))))));
g1_v(123)=(-params(10));
g1_v(124)=(-(y(166)*((-y(154))-params(10)/2*2*(y(169)-T(1)))));
g1_v(125)=1;
g1_v(126)=(-(T(20)*y(113)*(-(params(10)/2*2*(y(170)-T(1))))));
g1_v(127)=(-params(10));
g1_v(128)=(-(y(167)*((-y(155))-params(10)/2*2*(y(170)-T(1)))));
g1_v(129)=1;
g1_v(130)=(-(T(20)*y(114)*(-(params(10)/2*2*(y(171)-T(1))))));
g1_v(131)=(-params(10));
g1_v(132)=(-(y(168)*((-y(156))-params(10)/2*2*(y(171)-T(1)))));
g1_v(133)=1;
g1_v(134)=(-(T(36)*y(259)*y(271)*T(69)));
g1_v(135)=(-(T(37)*y(260)*y(272)*T(69)));
g1_v(136)=(-(T(38)*y(261)*y(273)*T(69)));
g1_v(137)=(-((y(240)*y(246)+y(271)*(1-y(250)))*T(69)));
g1_v(138)=(-((y(241)*y(247)+y(272)*(1-y(251)))*T(69)));
g1_v(139)=(-((y(242)*y(248)+y(273)*(1-y(252)))*T(69)));
g1_v(140)=(-(1-y(170)*y(155)-y(152)));
g1_v(141)=1;
g1_v(142)=y(149);
g1_v(143)=(-(1-y(171)*y(156)-y(153)));
g1_v(144)=1;
g1_v(145)=y(150);
g1_v(146)=(-(1-y(169)*y(154)-y(151)));
g1_v(147)=1;
g1_v(148)=y(148);
g1_v(149)=(1-params(16))/y(163);
g1_v(150)=(-1);
g1_v(151)=(1-params(16))/y(164);
g1_v(152)=(-1);
g1_v(153)=(-(T(2)+params(8)*T(2)/2*2*(y(141)-1)));
g1_v(154)=y(166)*params(8)*T(2);
g1_v(155)=(-(T(13)*T(40)*T(43)*y(11)*T(56)));
g1_v(156)=(-((-(y(11)*(y(108)+params(14)*(1-params(6))*(1-params(11))/params(18)*T(13))*T(22)))/(y(141)*y(11)*y(141)*y(11))));
g1_v(157)=(-((-(y(12)*T(16)*T(22)))/(y(142)*y(12)*y(142)*y(12))));
g1_v(158)=(-(T(2)+params(8)*T(2)/2*2*(y(142)-1)));
g1_v(159)=y(167)*params(8)*T(2);
g1_v(160)=(-(T(15)*T(46)*T(47)*y(12)*T(57)));
g1_v(161)=(-((-(y(13)*T(19)*T(22)))/(y(143)*y(13)*y(143)*y(13))));
g1_v(162)=(-(T(2)+params(9)*T(2)/2*2*(y(143)-1)));
g1_v(163)=y(168)*params(9)*T(2);
g1_v(164)=(-(T(18)*T(51)*T(52)*y(13)*T(58)));
g1_v(165)=(-1);
g1_v(166)=(1-params(16))/y(162);
g1_v(167)=(-(T(35)*y(271)*T(36)));
g1_v(168)=(-(T(35)*y(272)*T(37)));
g1_v(169)=(-(T(35)*y(273)*T(38)));
g1_v(170)=(-(T(35)*(-y(271))));
g1_v(171)=(-(T(35)*(-y(272))));
g1_v(172)=(-(T(35)*(-y(273))));
g1_v(173)=(-(T(35)*y(271)*y(259)*2*y(274)));
g1_v(174)=(-(T(35)*y(272)*y(260)*2*y(275)));
g1_v(175)=(-(T(35)*y(273)*y(261)*2*y(276)));
g1_v(176)=(-(T(36)*y(259)*y(271)*T(34)*T(33)*1/y(165)));
g1_v(177)=(-(T(37)*y(260)*y(272)*T(34)*T(33)*1/y(165)));
g1_v(178)=(-(T(38)*y(261)*y(273)*T(34)*T(33)*1/y(165)));
g1_v(179)=(-((y(240)*y(246)+y(271)*(1-y(250)))*T(34)*T(33)*1/y(165)));
g1_v(180)=(-((y(241)*y(247)+y(272)*(1-y(251)))*T(34)*T(33)*1/y(165)));
g1_v(181)=(-((y(242)*y(248)+y(273)*(1-y(252)))*T(34)*T(33)*1/y(165)));
g1_v(182)=(-(T(37)*T(35)*y(260)));
g1_v(183)=(-(T(35)*(1-y(251))));
g1_v(184)=(-(T(38)*T(35)*y(261)));
g1_v(185)=(-(T(35)*(1-y(252))));
g1_v(186)=(-(T(36)*T(35)*y(259)));
g1_v(187)=(-(T(35)*(1-y(250))));
g1_v(188)=(-(T(35)*y(247)));
g1_v(189)=(-(T(35)*y(248)));
g1_v(190)=(-(T(35)*y(240)));
g1_v(191)=(-(T(35)*y(241)));
g1_v(192)=(-(T(35)*y(242)));
g1_v(193)=(-(T(35)*y(246)));
    if ~isoctave && matlab_ver_less_than('9.8')
        sparse_rowval = double(sparse_rowval);
        sparse_colval = double(sparse_colval);
    end
    g1 = sparse(sparse_rowval, sparse_colval, g1_v, 43, 129);
end
end
