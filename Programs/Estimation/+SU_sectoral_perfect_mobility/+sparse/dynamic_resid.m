function [residual, T_order, T] = dynamic_resid(y, x, params, steady_state, T_order, T)
if nargin < 6
    T_order = -1;
    T = NaN(81, 1);
end
[T_order, T] = SU_sectoral_perfect_mobility.sparse.dynamic_resid_tt(y, x, params, steady_state, T_order, T);
residual = NaN(104, 1);
    residual(1) = (T(54)) - ((1-params(16))*y(137)/(params(7)*exp(y(131))));
    residual(2) = (y(137)/(params(7)*exp(y(131)))) - (y(138)/(params(7)*exp(y(132))));
    residual(3) = (y(163)) - ((1-params(16))*y(159)^(-params(1)));
    residual(4) = (y(107)) - (y(106)*T(33));
    residual(5) = (y(108)) - (y(106)*T(5));
    residual(6) = (T(6)) - (y(107)*params(16)*y(160)/y(156));
    residual(7) = (T(6)) - (y(108)*params(16)*y(161)/y(157));
    residual(8) = (T(6)*exp(y(129))) - (params(16)*y(162)*y(110)/y(158));
    residual(9) = (y(159)) - (y(106)-params(15)*y(2)-T(8)-T(55));
    residual(10) = (y(106)) - (T(36)^(1/T(1)));
    residual(11) = (y(149)) - (T(9)*(y(167)-exp(params(3)))^2);
    residual(12) = (y(150)) - (T(9)*(y(168)-exp(params(3)))^2);
    residual(13) = (y(151)) - (T(9)*(y(169)-exp(params(3)))^2);
    residual(14) = (y(152)) - (params(10)*(y(167)-exp(params(3))));
    residual(15) = (y(153)) - (params(10)*(y(168)-exp(params(3))));
    residual(16) = (y(154)) - (params(10)*(y(169)-exp(params(3))));
    residual(17) = (y(167)) - (y(111)/y(7)*T(10));
    residual(18) = (y(168)) - (T(10)*y(112)/y(8));
    residual(19) = (y(169)) - (T(10)*y(113)/y(9));
    residual(20) = (y(143)) - (T(40)+(y(139)-1)*T(41)+(y(139)-1)^2*T(56));
    residual(21) = (y(144)) - (T(40)+(y(140)-1)*T(41)+(y(140)-1)^2*T(56));
    residual(22) = (y(145)) - (T(40)+(y(141)-1)*T(41)+(y(141)-1)^2*params(9)*T(41)/2);
    residual(23) = (y(146)) - (T(41)+(y(139)-1)*params(8)*T(41));
    residual(24) = (y(147)) - (T(41)+(y(140)-1)*params(8)*T(41));
    residual(25) = (y(148)) - (T(41)+(y(141)-1)*params(9)*T(41));
    residual(26) = (y(162)/(1-params(16))) - (y(164)*(1-y(167)*y(152)-y(149))+T(14));
    residual(27) = (y(162)/(1-params(16))) - (y(165)*(1-y(168)*y(153)-y(150))+T(16));
    residual(28) = (y(162)/(1-params(16))) - (y(166)*(1-y(169)*y(154)-y(151))+T(18));
    residual(29) = (y(164)) - (T(12)*(y(237)*y(243)+y(268)*(1-y(247))));
    residual(30) = (y(165)) - (T(12)*(y(238)*y(244)+y(269)*(1-y(248))));
    residual(31) = (y(166)) - (T(12)*(y(239)*y(245)+y(270)*(1-y(249))));
    residual(32) = (y(146)*y(164)) - (y(133));
    residual(33) = (y(147)*y(165)) - (y(134));
    residual(34) = (y(148)*y(166)) - (y(135));
    residual(35) = (y(107)) - (T(62));
    residual(36) = (y(108)) - (T(67));
    residual(37) = (y(110)) - (T(72));
    residual(38) = (T(10)*y(115)) - (T(10)*y(111)*(1-y(149))+y(11)*(1-y(143)));
    residual(39) = (T(10)*y(116)) - (T(10)*y(112)*(1-y(150))+y(12)*(1-y(144)));
    residual(40) = (T(10)*y(117)) - (T(10)*y(113)*(1-y(151))+y(13)*(1-y(145)));
    residual(41) = ((1-params(16))*y(137)/y(160)) - (T(2)*(y(107)+T(46)*T(57))/y(119));
    residual(42) = ((1-params(16))*y(137)/y(161)) - (T(2)*(y(108)+T(47)*T(63))/y(120));
    residual(43) = ((1-params(16))*y(138)/y(162)) - (T(2)*(y(110)+T(48)*T(68))/y(122));
    residual(44) = ((1-params(16))*y(133)/y(160)) - ((y(107)+T(46)*T(57))*T(10)*T(42)/(y(139)*y(11)));
    residual(45) = ((1-params(16))*y(134)/y(161)) - ((y(108)+T(47)*T(63))*T(10)*T(42)/(y(140)*y(12)));
    residual(46) = ((1-params(16))*y(135)/y(162)) - ((y(110)+T(48)*T(68))*T(10)*T(42)/(y(141)*y(13)));
    residual(47) = (y(118)) - (y(122)+y(119)+y(120));
    residual(48) = (y(121)) - (y(119)+y(120));
    residual(49) = (y(114)) - (y(117)+y(115)+y(116));
    residual(50) = (y(110)) - (y(113)+y(111)+y(112));
    residual(51) = (y(155)) - (y(156)+y(157)+exp(y(129))*y(158));
    residual(52) = (y(142)) - (y(139)*T(19)+y(140)*T(20)+y(141)*T(21));
    residual(53) = (y(136)) - (y(137)*y(121)/y(118)+y(138)*y(122)/y(118));
    residual(54) = (y(105)) - (y(106)+y(110)*params(28));
    residual(55) = (y(109)) - (T(22)*T(32));
    residual(56) = (y(172)) - (T(62)/T(75));
    residual(57) = (y(173)) - (T(67)/T(78));
    residual(58) = (y(174)) - (T(72)/T(81));
    residual(59) = (y(171)) - ((y(107)*y(172)+y(108)*y(173)+y(110)*y(174))/y(105));
    residual(60) = (y(126)) - (exp(y(123))*y(106)/y(105)+exp(y(125))*T(21));
    residual(61) = (y(175)) - (params(3)*(1-params(19))+params(19)*y(71)+x(1));
    residual(62) = (y(123)) - (params(20)*y(19)+x(2));
    residual(63) = (y(124)) - (params(21)*y(21)+x(3));
    residual(64) = (y(125)) - (y(123)+y(124));
    residual(65) = (y(127)) - (params(22)*y(23)-x(4));
    residual(66) = (y(128)) - (params(23)*y(24)-x(5));
    residual(67) = (y(129)) - (params(24)*y(25)-x(6));
    residual(68) = (y(130)) - (params(25)*y(26)+x(7));
    residual(69) = (y(131)) - (params(26)*y(27)+x(8));
    residual(70) = (y(132)) - (params(27)*y(28)+x(9));
    residual(71) = (y(176)) - (log(y(105))-(log(steady_state(1))));
    residual(72) = (y(177)) - (log(y(106))-(log(steady_state(2))));
    residual(73) = (y(178)) - (log(y(110))-(log(steady_state(6))));
    residual(74) = (y(179)) - (log(y(118))-(log(steady_state(14))));
    residual(75) = (y(180)) - (log(y(121))-(log(steady_state(17))));
    residual(76) = (y(181)) - (log(y(122))-(log(steady_state(18))));
    residual(77) = (y(182)) - (log(y(114))-(log(steady_state(10))));
    residual(78) = (y(183)) - (y(176)-y(179));
    residual(79) = (y(184)) - (log(y(155))-(log(steady_state(51))));
    residual(80) = (y(185)) - (log(y(142))-(log(steady_state(38))));
    residual(81) = (y(186)) - (log(y(162))-(log(steady_state(58))));
    residual(82) = (y(187)) - (log(y(171))-(log(steady_state(67))));
    residual(83) = (y(188)) - (log(y(172))-(log(steady_state(68))));
    residual(84) = (y(189)) - (log(y(174))-(log(steady_state(70))));
    residual(85) = (y(190)) - (log(y(136))-(log(steady_state(32))));
    residual(86) = (y(170)) - (log(y(109))-(log(steady_state(5))));
    residual(87) = (y(191)) - (log(y(126))-(log(steady_state(22))));
    residual(88) = (y(192)) - (y(175)+y(177)-y(73)-params(3));
    residual(89) = (y(193)) - (y(175)+y(178)-y(74)-params(3));
    residual(90) = (y(194)) - (y(175)+y(176)-y(72)-params(3));
    residual(91) = (y(196)) - (y(175)+y(183)-y(79)-params(3));
    residual(92) = (y(208)) - (y(175)+y(182)-y(78)-params(3));
    residual(93) = (y(205)) - (y(175)+y(190)-y(86)-params(3));
    residual(94) = (y(195)) - (y(170)-y(66)+params(13)*(y(175)-params(3)));
    residual(95) = (y(204)) - (y(175)+y(191)-y(87)-params(3));
    residual(96) = (y(197)) - (y(186)-y(82));
    residual(97) = (y(198)) - (y(179)-y(75));
    residual(98) = (y(199)) - (y(180)-y(76));
    residual(99) = (y(200)) - (y(181)-y(77));
    residual(100) = (y(201)) - (y(188)-y(84));
    residual(101) = (y(202)) - (y(189)-y(85));
    residual(102) = (y(203)) - (y(187)-y(83));
    residual(103) = (y(206)) - (y(184)-y(80));
    residual(104) = (y(207)) - (y(185)-y(81));
end
