function [y, T, residual, g1] = dynamic_3(y, x, params, steady_state, sparse_rowval, sparse_colval, sparse_colptr, T)
residual=NaN(33, 1);
  T(1)=exp(params(3));
  y(129)=params(8)/2*(y(147)-T(1))^2;
  y(131)=params(8)/2*(y(149)-T(1))^2;
  y(110)=y(108)+y(109);
  y(99)=y(102)+y(100)+y(101);
  T(2)=params(6)*y(141)^(-params(5));
  y(97)=y(95)*T(2);
  T(3)=(1-params(9))^(-params(17));
  T(4)=(1-(1-params(9)))^(-params(17));
  T(5)=y(110)^(1+params(17))*T(3)+y(111)^(1+params(17))*T(4);
  y(112)=T(5)^(1/(1+params(17)));
  T(6)=(1-params(6))*y(140)^(-params(5));
  y(96)=y(95)*T(6);
  y(130)=params(8)/2*(y(148)-T(1))^2;
  T(7)=exp(y(118));
  T(8)=T(7)*y(135)^(1/params(15));
  T(9)=exp(y(119));
  residual(1)=(T(8)*T(9))-(params(14)*y(142)*y(99)/y(138));
  T(10)=exp(y(117))*(1-params(14))*params(11)/params(28)/(params(28)^(1/params(4))*params(7));
  residual(2)=(y(139))-(y(95)-params(13)*y(2)-T(7)*y(135)^(1+1/params(15))/(1+1/params(15))-y(112)^(1+1/params(4))*T(10)/(1+1/params(4)));
  T(11)=(1-params(14))*params(11)/(1+params(12));
  T(12)=params(14)^(params(15)/(1+params(15)));
  T(13)=exp(y(155));
  T(14)=exp(y(113));
  T(15)=y(108)^T(11);
  T(16)=params(10)*(T(1)^params(1)/params(2)-1+1+params(9)/params(10)-T(1))/(1+params(12));
  T(17)=params(16)/(T(12)*(1-params(6))*(1-params(9)))^params(14);
  T(18)=T(1)^(-T(16));
  T(19)=y(136)^params(14)*T(17);
  T(20)=T(13)^(-T(16));
  T(21)=T(14)*(params(12)*(1-params(6))*(1-params(9))/params(16)+(1-params(6))*(1-params(9))/params(16))/(T(18)*((1-params(6))*(1-params(9))*params(10)*T(1))^T(16)*((1-params(6))*(1-params(9))*params(28))^T(11))*T(20);
  T(22)=T(21)*y(11)^T(16);
  T(23)=T(15)*T(22)-params(12)*(1-params(6))*(1-params(9))/params(16);
  residual(3)=(y(96))-(T(19)*T(23));
  T(24)=y(109)^T(11);
  T(25)=params(16)/(T(12)*params(6)*(1-params(9)))^params(14);
  T(26)=y(137)^params(14)*T(25);
  T(27)=T(14)*(params(12)*params(6)*(1-params(9))/params(16)+params(6)*(1-params(9))/params(16))/(T(18)*(params(6)*(1-params(9))*params(10)*T(1))^T(16)*(params(6)*(1-params(9))*params(28))^T(11))*T(20);
  T(28)=T(27)*y(12)^T(16);
  T(29)=T(24)*T(28)-params(12)*params(6)*(1-params(9))/params(16);
  residual(4)=(y(97))-(T(26)*T(29));
  T(30)=exp(y(115));
  T(31)=y(111)^T(11);
  T(32)=params(16)/(params(9)*T(12))^params(14);
  T(33)=y(138)^params(14)*T(32);
  T(34)=T(30)*(params(9)*params(12)/params(16)+params(9)/params(16))/(T(18)*(params(9)*params(10)*T(1))^T(16)*(params(9)*params(28))^T(11))*T(20);
  T(35)=T(34)*y(13)^T(16);
  T(36)=T(31)*T(35)-params(9)*params(12)/params(16);
  residual(5)=(y(99))-(T(33)*T(36));
  residual(6)=((1-params(14))*y(126)/y(140))-(T(11)*(y(96)+params(12)*(1-params(6))*(1-params(9))/params(16)*T(19))/y(108));
  residual(7)=((1-params(14))*y(126)/y(141))-(T(11)*(y(97)+params(12)*params(6)*(1-params(9))/params(16)*T(26))/y(109));
  residual(8)=((1-params(14))*y(127)/y(142))-(T(11)*(y(99)+params(9)*params(12)/params(16)*T(33))/y(111));
  residual(9)=(T(8))-(y(97)*params(14)*y(141)/y(137));
  residual(10)=(y(135))-(y(136)+y(137)+T(9)*y(138));
  residual(11)=(T(8))-(y(96)*params(14)*y(140)/y(136));
  T(37)=(y(110)/y(112))^params(17);
  T(38)=params(7)*exp(y(121));
  T(39)=y(112)^(1/params(4))*T(10);
  residual(12)=(T(3)*T(37)*T(39))-((1-params(14))*y(126)/T(38));
  T(40)=(y(111)/y(112))^params(17);
  T(41)=params(7)*exp(y(122));
  residual(13)=(T(4)*T(40)*T(39))-((1-params(14))*y(127)/T(41));
  T(42)=params(6)^(1-(params(5)-1)/params(5));
  T(43)=(1-params(6))^(1-(params(5)-1)/params(5));
  T(44)=T(42)*y(97)^((params(5)-1)/params(5))+T(43)*y(96)^((params(5)-1)/params(5));
  residual(14)=(y(95))-(T(44)^(1/((params(5)-1)/params(5))));
  residual(15)=(y(147))-(y(100)/y(7)*T(13));
  residual(16)=(y(148))-(T(13)*y(101)/y(8));
  residual(17)=(y(149))-(T(13)*y(102)/y(9));
  T(45)=1-(1+params(9)/params(10)-T(1));
  residual(18)=(T(13)*y(104))-(T(13)*y(100)*(1-y(129))+y(11)*T(45));
  residual(19)=(T(13)*y(105))-(T(13)*y(101)*(1-y(130))+y(12)*T(45));
  residual(20)=(T(13)*y(106))-(T(13)*y(102)*(1-y(131))+y(13)*T(45));
  residual(21)=(y(132))-(params(8)*(y(147)-T(1)));
  residual(22)=(y(133))-(params(8)*(y(148)-T(1)));
  residual(23)=(y(134))-(params(8)*(y(149)-T(1)));
  T(46)=params(2)*exp(y(120));
  T(47)=exp(y(248))^(-params(1));
  T(48)=T(46)*y(236)/y(143)*T(47);
  T(49)=y(240)^2;
  residual(24)=(y(142)/(1-params(14)))-(y(144)*(1-y(147)*y(132)-y(129))+T(48)*y(237)*y(225)*T(49));
  T(50)=y(241)^2;
  residual(25)=(y(142)/(1-params(14)))-(y(145)*(1-y(148)*y(133)-y(130))+T(48)*y(238)*y(226)*T(50));
  T(51)=y(242)^2;
  residual(26)=(y(142)/(1-params(14)))-(y(146)*(1-y(149)*y(134)-y(131))+T(48)*y(239)*y(227)*T(51));
  residual(27)=(y(144))-(T(48)*(y(216)+y(237)*T(45)));
  residual(28)=(y(145))-(T(48)*(y(217)+y(238)*T(45)));
  residual(29)=(y(146))-(T(48)*(y(218)+y(239)*T(45)));
  residual(30)=((1-params(14))*y(123)/y(140))-((y(96)+params(12)*(1-params(6))*(1-params(9))/params(16)*T(19))*T(13)*T(16)/y(11));
  residual(31)=((1-params(14))*y(124)/y(141))-((y(97)+params(12)*params(6)*(1-params(9))/params(16)*T(26))*T(13)*T(16)/y(12));
  residual(32)=((1-params(14))*y(125)/y(142))-((y(99)+params(9)*params(12)/params(16)*T(33))*T(13)*T(16)/y(13));
  residual(33)=(y(143))-((1-params(14))*y(139)^(-params(1)));
  T(52)=getPowerDeriv(y(96),(params(5)-1)/params(5),1);
  T(53)=getPowerDeriv(T(44),1/((params(5)-1)/params(5)),1);
  T(54)=getPowerDeriv(y(97),(params(5)-1)/params(5),1);
  T(55)=getPowerDeriv(T(5),1/(1+params(17)),1);
  T(56)=T(3)*getPowerDeriv(y(110),1+params(17),1)*T(55);
  T(57)=getPowerDeriv(y(110)/y(112),params(17),1);
  T(58)=T(55)*T(4)*getPowerDeriv(y(111),1+params(17),1);
  T(59)=getPowerDeriv(y(111)/y(112),params(17),1);
  T(60)=getPowerDeriv(y(112),1/params(4),1);
  T(61)=getPowerDeriv(y(112),1+1/params(4),1);
  T(62)=T(7)*getPowerDeriv(y(135),1/params(15),1);
  T(63)=T(17)*getPowerDeriv(y(136),params(14),1);
  T(64)=T(25)*getPowerDeriv(y(137),params(14),1);
  T(65)=T(32)*getPowerDeriv(y(138),params(14),1);
  T(66)=y(95)*(1-params(6))*getPowerDeriv(y(140),(-params(5)),1);
  T(67)=y(95)*params(6)*getPowerDeriv(y(141),(-params(5)),1);
  T(68)=T(47)*T(46)*(-y(236))/(y(143)*y(143));
  T(69)=T(10)*T(56)*T(61)/(1+1/params(4));
if nargout > 3
    g1_v = NaN(157, 1);
g1_v(1)=params(13);
g1_v(2)=(-(T(13)*(-y(100))/(y(7)*y(7))));
g1_v(3)=(-(T(13)*(-y(101))/(y(8)*y(8))));
g1_v(4)=(-(T(13)*(-y(102))/(y(9)*y(9))));
g1_v(5)=(-(T(19)*T(15)*T(21)*getPowerDeriv(y(11),T(16),1)));
g1_v(6)=(-T(45));
g1_v(7)=(-((-((y(96)+params(12)*(1-params(6))*(1-params(9))/params(16)*T(19))*T(13)*T(16)))/(y(11)*y(11))));
g1_v(8)=(-(T(26)*T(24)*T(27)*getPowerDeriv(y(12),T(16),1)));
g1_v(9)=(-T(45));
g1_v(10)=(-((-((y(97)+params(12)*params(6)*(1-params(9))/params(16)*T(26))*T(13)*T(16)))/(y(12)*y(12))));
g1_v(11)=(-(T(33)*T(31)*T(34)*getPowerDeriv(y(13),T(16),1)));
g1_v(12)=(-T(45));
g1_v(13)=(-((-((y(99)+params(9)*params(12)/params(16)*T(33))*T(13)*T(16)))/(y(13)*y(13))));
g1_v(14)=T(9)*T(62);
g1_v(15)=T(7)*getPowerDeriv(y(135),1+1/params(15),1)/(1+1/params(15));
g1_v(16)=T(62);
g1_v(17)=1;
g1_v(18)=T(62);
g1_v(19)=1;
g1_v(20)=(-((1-params(14))*getPowerDeriv(y(139),(-params(1)),1)));
g1_v(21)=T(69);
g1_v(22)=(-(T(19)*T(22)*getPowerDeriv(y(108),T(11),1)));
g1_v(23)=(-((-(T(11)*(y(96)+params(12)*(1-params(6))*(1-params(9))/params(16)*T(19))))/(y(108)*y(108))));
g1_v(24)=T(3)*(T(39)*T(57)*(y(112)-y(110)*T(56))/(y(112)*y(112))+T(37)*T(10)*T(56)*T(60));
g1_v(25)=T(4)*(T(39)*T(59)*(-(y(111)*T(56)))/(y(112)*y(112))+T(40)*T(10)*T(56)*T(60));
g1_v(26)=T(69);
g1_v(27)=(-(T(26)*T(28)*getPowerDeriv(y(109),T(11),1)));
g1_v(28)=(-((-(T(11)*(y(97)+params(12)*params(6)*(1-params(9))/params(16)*T(26))))/(y(109)*y(109))));
g1_v(29)=T(3)*(T(39)*T(57)*(y(112)-y(110)*T(56))/(y(112)*y(112))+T(37)*T(10)*T(56)*T(60));
g1_v(30)=T(4)*(T(39)*T(59)*(-(y(111)*T(56)))/(y(112)*y(112))+T(40)*T(10)*T(56)*T(60));
g1_v(31)=T(10)*T(58)*T(61)/(1+1/params(4));
g1_v(32)=(-(T(33)*T(35)*getPowerDeriv(y(111),T(11),1)));
g1_v(33)=(-((-(T(11)*(y(99)+params(9)*params(12)/params(16)*T(33))))/(y(111)*y(111))));
g1_v(34)=T(3)*(T(39)*T(57)*(-(y(110)*T(58)))/(y(112)*y(112))+T(37)*T(10)*T(58)*T(60));
g1_v(35)=T(4)*(T(39)*T(59)*(y(112)-y(111)*T(58))/(y(112)*y(112))+T(40)*T(10)*T(58)*T(60));
g1_v(36)=T(66);
g1_v(37)=(-((1-params(14))*y(126)))/(y(140)*y(140))-T(11)*T(66)/y(108);
g1_v(38)=(-((params(14)*y(96)+params(14)*y(140)*T(66))/y(136)));
g1_v(39)=(-(T(53)*T(43)*T(52)*T(66)));
g1_v(40)=(-((1-params(14))*y(123)))/(y(140)*y(140))-T(13)*T(16)*T(66)/y(11);
g1_v(41)=T(67);
g1_v(42)=(-((1-params(14))*y(126)))/(y(141)*y(141))-T(11)*T(67)/y(109);
g1_v(43)=(-((params(14)*y(97)+params(14)*y(141)*T(67))/y(137)));
g1_v(44)=(-(T(53)*T(42)*T(54)*T(67)));
g1_v(45)=(-((1-params(14))*y(124)))/(y(141)*y(141))-T(13)*T(16)*T(67)/y(12);
g1_v(46)=(-(params(14)*y(99)/y(138)));
g1_v(47)=(-((1-params(14))*y(127)))/(y(142)*y(142));
g1_v(48)=1/(1-params(14));
g1_v(49)=1/(1-params(14));
g1_v(50)=1/(1-params(14));
g1_v(51)=(-((1-params(14))*y(125)))/(y(142)*y(142));
g1_v(52)=(-(T(29)*T(64)));
g1_v(53)=(-(T(11)*params(12)*params(6)*(1-params(9))/params(16)*T(64)/y(109)));
g1_v(54)=(-((-(y(97)*params(14)*y(141)))/(y(137)*y(137))));
g1_v(55)=(-1);
g1_v(56)=(-(T(13)*T(16)*params(12)*params(6)*(1-params(9))/params(16)*T(64)/y(12)));
g1_v(57)=(-((-(params(14)*y(142)*y(99)))/(y(138)*y(138))));
g1_v(58)=(-(T(36)*T(65)));
g1_v(59)=(-(T(11)*params(9)*params(12)/params(16)*T(65)/y(111)));
g1_v(60)=(-T(9));
g1_v(61)=(-(T(13)*T(16)*params(9)*params(12)/params(16)*T(65)/y(13)));
g1_v(62)=(-(T(23)*T(63)));
g1_v(63)=(-(T(11)*params(12)*(1-params(6))*(1-params(9))/params(16)*T(63)/y(108)));
g1_v(64)=(-1);
g1_v(65)=(-((-(y(96)*params(14)*y(140)))/(y(136)*y(136))));
g1_v(66)=(-(T(13)*T(16)*params(12)*(1-params(6))*(1-params(9))/params(16)*T(63)/y(11)));
g1_v(67)=(1-params(14))/y(140);
g1_v(68)=(1-params(14))/y(141);
g1_v(69)=(-((1-params(14))/T(38)));
g1_v(70)=(1-params(14))/y(142);
g1_v(71)=(-((1-params(14))/T(41)));
g1_v(72)=(-1);
g1_v(73)=T(6);
g1_v(74)=T(2);
g1_v(75)=(-(T(11)*T(6)/y(108)));
g1_v(76)=(-(T(11)*T(2)/y(109)));
g1_v(77)=(-(T(2)*params(14)*y(141)/y(137)));
g1_v(78)=(-(params(14)*y(140)*T(6)/y(136)));
g1_v(79)=1-T(53)*(T(42)*T(2)*T(54)+T(43)*T(6)*T(52));
g1_v(80)=(-(T(6)*T(13)*T(16)/y(11)));
g1_v(81)=(-(T(2)*T(13)*T(16)/y(12)));
g1_v(82)=(-(params(14)*y(142)/y(138)));
g1_v(83)=1;
g1_v(84)=(-(T(11)/y(111)));
g1_v(85)=(-(T(13)*1/y(7)));
g1_v(86)=(-(T(13)*(1-y(129))));
g1_v(87)=(-(T(13)*T(16)/y(13)));
g1_v(88)=(-(params(14)*y(142)/y(138)));
g1_v(89)=1;
g1_v(90)=(-(T(11)/y(111)));
g1_v(91)=(-(T(13)*1/y(8)));
g1_v(92)=(-(T(13)*(1-y(130))));
g1_v(93)=(-(T(13)*T(16)/y(13)));
g1_v(94)=(-(params(14)*y(142)/y(138)));
g1_v(95)=1;
g1_v(96)=(-(T(11)/y(111)));
g1_v(97)=(-(T(13)*1/y(9)));
g1_v(98)=(-(T(13)*(1-y(131))));
g1_v(99)=(-(T(13)*T(16)/y(13)));
g1_v(100)=T(13);
g1_v(101)=T(13);
g1_v(102)=T(13);
g1_v(103)=1;
g1_v(104)=(-(y(144)*(-y(147))));
g1_v(105)=1;
g1_v(106)=(-(y(145)*(-y(148))));
g1_v(107)=1;
g1_v(108)=(-(y(146)*(-y(149))));
g1_v(109)=1;
g1_v(110)=(-(T(13)*y(100)*(-(params(8)/2*2*(y(147)-T(1))))));
g1_v(111)=(-params(8));
g1_v(112)=(-(y(144)*((-y(132))-params(8)/2*2*(y(147)-T(1)))));
g1_v(113)=1;
g1_v(114)=(-(T(13)*y(101)*(-(params(8)/2*2*(y(148)-T(1))))));
g1_v(115)=(-params(8));
g1_v(116)=(-(y(145)*((-y(133))-params(8)/2*2*(y(148)-T(1)))));
g1_v(117)=1;
g1_v(118)=(-(T(13)*y(102)*(-(params(8)/2*2*(y(149)-T(1))))));
g1_v(119)=(-params(8));
g1_v(120)=(-(y(146)*((-y(134))-params(8)/2*2*(y(149)-T(1)))));
g1_v(121)=(-(1-y(147)*y(132)-y(129)));
g1_v(122)=1;
g1_v(123)=(-(1-y(148)*y(133)-y(130)));
g1_v(124)=1;
g1_v(125)=(-(1-y(149)*y(134)-y(131)));
g1_v(126)=1;
g1_v(127)=(1-params(14))/y(140);
g1_v(128)=(1-params(14))/y(141);
g1_v(129)=(1-params(14))/y(142);
g1_v(130)=(-(T(49)*y(225)*y(237)*T(68)));
g1_v(131)=(-(T(50)*y(226)*y(238)*T(68)));
g1_v(132)=(-(T(51)*y(227)*y(239)*T(68)));
g1_v(133)=(-((y(216)+y(237)*T(45))*T(68)));
g1_v(134)=(-((y(217)+y(238)*T(45))*T(68)));
g1_v(135)=(-((y(218)+y(239)*T(45))*T(68)));
g1_v(136)=1;
g1_v(137)=(-(T(48)*y(237)*T(49)));
g1_v(138)=(-(T(48)*y(238)*T(50)));
g1_v(139)=(-(T(48)*y(239)*T(51)));
g1_v(140)=(-(T(48)*y(237)*y(225)*2*y(240)));
g1_v(141)=(-(T(48)*y(238)*y(226)*2*y(241)));
g1_v(142)=(-(T(48)*y(239)*y(227)*2*y(242)));
g1_v(143)=(-(T(49)*T(48)*y(225)));
g1_v(144)=(-(T(48)*T(45)));
g1_v(145)=(-(T(50)*T(48)*y(226)));
g1_v(146)=(-(T(48)*T(45)));
g1_v(147)=(-(T(51)*T(48)*y(227)));
g1_v(148)=(-(T(48)*T(45)));
g1_v(149)=(-T(48));
g1_v(150)=(-T(48));
g1_v(151)=(-T(48));
g1_v(152)=(-(T(49)*y(225)*y(237)*T(47)*T(46)*1/y(143)));
g1_v(153)=(-(T(50)*y(226)*y(238)*T(47)*T(46)*1/y(143)));
g1_v(154)=(-(T(51)*y(227)*y(239)*T(47)*T(46)*1/y(143)));
g1_v(155)=(-((y(216)+y(237)*T(45))*T(47)*T(46)*1/y(143)));
g1_v(156)=(-((y(217)+y(238)*T(45))*T(47)*T(46)*1/y(143)));
g1_v(157)=(-((y(218)+y(239)*T(45))*T(47)*T(46)*1/y(143)));
    if ~isoctave && matlab_ver_less_than('9.8')
        sparse_rowval = double(sparse_rowval);
        sparse_colval = double(sparse_colval);
    end
    g1 = sparse(sparse_rowval, sparse_colval, g1_v, 33, 99);
end
end
