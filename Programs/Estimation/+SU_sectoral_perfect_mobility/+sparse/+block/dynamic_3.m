function [y, T, residual, g1] = dynamic_3(y, x, params, steady_state, sparse_rowval, sparse_colval, sparse_colptr, T)
residual=NaN(40, 1);
  T(1)=exp(params(3));
  y(149)=params(10)/2*(y(167)-T(1))^2;
  y(151)=params(10)/2*(y(169)-T(1))^2;
  T(2)=T(1)^params(1)/params(2)-1+1+params(11)/params(12)-T(1);
  y(146)=T(2)+(y(139)-1)*params(8)*T(2);
  y(147)=T(2)+(y(140)-1)*params(8)*T(2);
  y(148)=T(2)+(y(141)-1)*params(9)*T(2);
  T(3)=params(6)*y(161)^(-params(5));
  y(108)=y(106)*T(3);
  T(4)=(1-params(6))*y(160)^(-params(5));
  y(107)=y(106)*T(4);
  y(110)=y(113)+y(111)+y(112);
  y(150)=params(10)/2*(y(168)-T(1))^2;
  T(5)=exp(y(128));
  T(6)=exp(y(127))*(1-params(16))*params(13)/params(29)/(params(29)^(1/params(4))*params(7));
  residual(1)=(y(159))-(y(106)-params(15)*y(2)-T(5)*y(155)^(1+1/params(17))/(1+1/params(17))-y(118)^(1+1/params(4))*T(6)/(1+1/params(4)));
  T(7)=(1-params(16))*params(13)/(1+params(14));
  T(8)=params(16)^(params(17)/(1+params(17)));
  T(9)=exp(y(175));
  T(10)=exp(y(123));
  T(11)=y(119)^T(7);
  T(12)=params(12)*T(2)/(1+params(14));
  T(13)=params(18)/(T(8)*(1-params(6))*(1-params(11)))^params(16);
  T(14)=T(1)^(-T(12));
  T(15)=y(156)^params(16)*T(13);
  T(16)=T(9)^(-T(12));
  T(17)=T(10)*(params(14)*(1-params(6))*(1-params(11))/params(18)+(1-params(6))*(1-params(11))/params(18))/(T(14)*((1-params(6))*(1-params(11))*params(12)*T(1))^T(12)*((1-params(6))*(1-params(11))*params(29))^T(7))*T(16);
  T(18)=T(17)*(y(139)*y(11))^T(12);
  T(19)=T(11)*T(18)-params(14)*(1-params(6))*(1-params(11))/params(18);
  residual(2)=(y(107))-(T(15)*T(19));
  T(20)=y(120)^T(7);
  T(21)=params(18)/(T(8)*params(6)*(1-params(11)))^params(16);
  T(22)=y(157)^params(16)*T(21);
  T(23)=T(10)*(params(14)*params(6)*(1-params(11))/params(18)+params(6)*(1-params(11))/params(18))/(T(14)*(params(6)*(1-params(11))*params(12)*T(1))^T(12)*(params(6)*(1-params(11))*params(29))^T(7))*T(16);
  T(24)=T(23)*(y(140)*y(12))^T(12);
  T(25)=T(20)*T(24)-params(14)*params(6)*(1-params(11))/params(18);
  residual(3)=(y(108))-(T(22)*T(25));
  T(26)=exp(y(125));
  T(27)=y(122)^T(7);
  T(28)=params(18)/(params(11)*T(8))^params(16);
  T(29)=y(158)^params(16)*T(28);
  T(30)=T(26)*(params(11)*params(14)/params(18)+params(11)/params(18))/(T(14)*(params(11)*params(12)*T(1))^T(12)*(params(11)*params(29))^T(7))*T(16);
  T(31)=T(30)*(y(141)*y(13))^T(12);
  T(32)=T(27)*T(31)-params(11)*params(14)/params(18);
  residual(4)=(y(110))-(T(29)*T(32));
  residual(5)=((1-params(16))*y(137)/y(160))-(T(7)*(y(107)+params(14)*(1-params(6))*(1-params(11))/params(18)*T(15))/y(119));
  residual(6)=((1-params(16))*y(137)/y(161))-(T(7)*(y(108)+params(14)*params(6)*(1-params(11))/params(18)*T(22))/y(120));
  residual(7)=((1-params(16))*y(138)/y(162))-(T(7)*(y(110)+params(11)*params(14)/params(18)*T(29))/y(122));
  residual(8)=(y(118))-(y(122)+y(119)+y(120));
  T(33)=exp(y(129));
  residual(9)=(y(155))-(y(156)+y(157)+T(33)*y(158));
  T(34)=T(5)*y(155)^(1/params(17));
  residual(10)=(T(34)*T(33))-(params(16)*y(162)*y(110)/y(158));
  residual(11)=(T(34))-(y(108)*params(16)*y(161)/y(157));
  T(35)=params(7)*exp(y(131));
  T(36)=params(7)*exp(y(132));
  residual(12)=(y(137)/T(35))-(y(138)/T(36));
  residual(13)=(y(118)^(1/params(4))*T(6))-((1-params(16))*y(137)/T(35));
  residual(14)=(T(34))-(y(107)*params(16)*y(160)/y(156));
  T(37)=params(6)^(1-(params(5)-1)/params(5));
  T(38)=(1-params(6))^(1-(params(5)-1)/params(5));
  T(39)=T(37)*y(108)^((params(5)-1)/params(5))+T(38)*y(107)^((params(5)-1)/params(5));
  residual(15)=(y(106))-(T(39)^(1/((params(5)-1)/params(5))));
  residual(16)=(y(167))-(y(111)/y(7)*T(9));
  residual(17)=(y(168))-(T(9)*y(112)/y(8));
  residual(18)=(y(169))-(T(9)*y(113)/y(9));
  residual(19)=(T(9)*y(115))-(T(9)*y(111)*(1-y(149))+y(11)*(1-y(143)));
  residual(20)=(T(9)*y(116))-(T(9)*y(112)*(1-y(150))+y(12)*(1-y(144)));
  residual(21)=(T(9)*y(117))-(T(9)*y(113)*(1-y(151))+y(13)*(1-y(145)));
  residual(22)=(y(152))-(params(10)*(y(167)-T(1)));
  residual(23)=(y(153))-(params(10)*(y(168)-T(1)));
  residual(24)=(y(154))-(params(10)*(y(169)-T(1)));
  residual(25)=(y(143))-(1+params(11)/params(12)-T(1)+(y(139)-1)*T(2)+(y(139)-1)^2*params(8)*T(2)/2);
  residual(26)=(y(144))-(1+params(11)/params(12)-T(1)+(y(140)-1)*T(2)+(y(140)-1)^2*params(8)*T(2)/2);
  residual(27)=(y(145))-(1+params(11)/params(12)-T(1)+(y(141)-1)*T(2)+(y(141)-1)^2*params(9)*T(2)/2);
  T(40)=params(2)*exp(y(130));
  T(41)=exp(y(279))^(-params(1));
  T(42)=T(40)*y(267)/y(163)*T(41);
  T(43)=y(271)^2;
  residual(28)=(y(162)/(1-params(16)))-(y(164)*(1-y(167)*y(152)-y(149))+T(42)*y(268)*y(256)*T(43));
  T(44)=y(272)^2;
  residual(29)=(y(162)/(1-params(16)))-(y(165)*(1-y(168)*y(153)-y(150))+T(42)*y(269)*y(257)*T(44));
  T(45)=y(273)^2;
  residual(30)=(y(162)/(1-params(16)))-(y(166)*(1-y(169)*y(154)-y(151))+T(42)*y(270)*y(258)*T(45));
  residual(31)=(y(164))-(T(42)*(y(237)*y(243)+y(268)*(1-y(247))));
  residual(32)=(y(165))-(T(42)*(y(238)*y(244)+y(269)*(1-y(248))));
  residual(33)=(y(166))-(T(42)*(y(239)*y(245)+y(270)*(1-y(249))));
  residual(34)=(y(146)*y(164))-(y(133));
  residual(35)=(y(147)*y(165))-(y(134));
  residual(36)=(y(148)*y(166))-(y(135));
  residual(37)=((1-params(16))*y(133)/y(160))-((y(107)+params(14)*(1-params(6))*(1-params(11))/params(18)*T(15))*T(9)*T(12)/(y(139)*y(11)));
  residual(38)=((1-params(16))*y(134)/y(161))-((y(108)+params(14)*params(6)*(1-params(11))/params(18)*T(22))*T(9)*T(12)/(y(140)*y(12)));
  residual(39)=((1-params(16))*y(135)/y(162))-((y(110)+params(11)*params(14)/params(18)*T(29))*T(9)*T(12)/(y(141)*y(13)));
  residual(40)=(y(163))-((1-params(16))*y(159)^(-params(1)));
  T(46)=getPowerDeriv(y(107),(params(5)-1)/params(5),1);
  T(47)=getPowerDeriv(T(39),1/((params(5)-1)/params(5)),1);
  T(48)=getPowerDeriv(y(108),(params(5)-1)/params(5),1);
  T(49)=getPowerDeriv(y(139)*y(11),T(12),1);
  T(50)=getPowerDeriv(y(140)*y(12),T(12),1);
  T(51)=getPowerDeriv(y(141)*y(13),T(12),1);
  T(52)=T(5)*getPowerDeriv(y(155),1/params(17),1);
  T(53)=T(13)*getPowerDeriv(y(156),params(16),1);
  T(54)=T(21)*getPowerDeriv(y(157),params(16),1);
  T(55)=T(28)*getPowerDeriv(y(158),params(16),1);
  T(56)=y(106)*(1-params(6))*getPowerDeriv(y(160),(-params(5)),1);
  T(57)=y(106)*params(6)*getPowerDeriv(y(161),(-params(5)),1);
  T(58)=T(41)*T(40)*(-y(267))/(y(163)*y(163));
if nargout > 3
    g1_v = NaN(185, 1);
g1_v(1)=params(15);
g1_v(2)=(-(T(9)*(-y(111))/(y(7)*y(7))));
g1_v(3)=(-(T(9)*(-y(112))/(y(8)*y(8))));
g1_v(4)=(-(T(9)*(-y(113))/(y(9)*y(9))));
g1_v(5)=(-(T(15)*T(11)*T(17)*y(139)*T(49)));
g1_v(6)=(-(1-y(143)));
g1_v(7)=(-((-(y(139)*(y(107)+params(14)*(1-params(6))*(1-params(11))/params(18)*T(15))*T(9)*T(12)))/(y(139)*y(11)*y(139)*y(11))));
g1_v(8)=(-(T(22)*T(20)*T(23)*y(140)*T(50)));
g1_v(9)=(-(1-y(144)));
g1_v(10)=(-((-(y(140)*(y(108)+params(14)*params(6)*(1-params(11))/params(18)*T(22))*T(9)*T(12)))/(y(140)*y(12)*y(140)*y(12))));
g1_v(11)=(-(T(29)*T(27)*T(30)*y(141)*T(51)));
g1_v(12)=(-(1-y(145)));
g1_v(13)=(-((-(y(141)*(y(110)+params(11)*params(14)/params(18)*T(29))*T(9)*T(12)))/(y(141)*y(13)*y(141)*y(13))));
g1_v(14)=1;
g1_v(15)=(-((1-params(16))*getPowerDeriv(y(159),(-params(1)),1)));
g1_v(16)=(-(T(19)*T(53)));
g1_v(17)=(-(T(7)*params(14)*(1-params(6))*(1-params(11))/params(18)*T(53)/y(119)));
g1_v(18)=(-1);
g1_v(19)=(-((-(y(107)*params(16)*y(160)))/(y(156)*y(156))));
g1_v(20)=(-(T(9)*T(12)*params(14)*(1-params(6))*(1-params(11))/params(18)*T(53)/(y(139)*y(11))));
g1_v(21)=(-(T(22)*T(24)*getPowerDeriv(y(120),T(7),1)));
g1_v(22)=(-((-(T(7)*(y(108)+params(14)*params(6)*(1-params(11))/params(18)*T(22))))/(y(120)*y(120))));
g1_v(23)=(-1);
g1_v(24)=(-(T(29)*T(31)*getPowerDeriv(y(122),T(7),1)));
g1_v(25)=(-((-(T(7)*(y(110)+params(11)*params(14)/params(18)*T(29))))/(y(122)*y(122))));
g1_v(26)=(-1);
g1_v(27)=(1-params(16))/y(160);
g1_v(28)=(1-params(16))/y(161);
g1_v(29)=1/T(35);
g1_v(30)=(-((1-params(16))/T(35)));
g1_v(31)=T(57);
g1_v(32)=(-((1-params(16))*y(137)))/(y(161)*y(161))-T(7)*T(57)/y(120);
g1_v(33)=(-((params(16)*y(108)+params(16)*y(161)*T(57))/y(157)));
g1_v(34)=(-(T(47)*T(37)*T(48)*T(57)));
g1_v(35)=(-((1-params(16))*y(134)))/(y(161)*y(161))-T(9)*T(12)*T(57)/(y(140)*y(12));
g1_v(36)=(-(T(32)*T(55)));
g1_v(37)=(-(T(7)*params(11)*params(14)/params(18)*T(55)/y(122)));
g1_v(38)=(-T(33));
g1_v(39)=(-((-(params(16)*y(162)*y(110)))/(y(158)*y(158))));
g1_v(40)=(-(T(9)*T(12)*params(11)*params(14)/params(18)*T(55)/(y(141)*y(13))));
g1_v(41)=(-(T(15)*T(18)*getPowerDeriv(y(119),T(7),1)));
g1_v(42)=(-((-(T(7)*(y(107)+params(14)*(1-params(6))*(1-params(11))/params(18)*T(15))))/(y(119)*y(119))));
g1_v(43)=(-1);
g1_v(44)=(-(T(25)*T(54)));
g1_v(45)=(-(T(7)*params(14)*params(6)*(1-params(11))/params(18)*T(54)/y(120)));
g1_v(46)=(-1);
g1_v(47)=(-((-(y(108)*params(16)*y(161)))/(y(157)*y(157))));
g1_v(48)=(-(T(9)*T(12)*params(14)*params(6)*(1-params(11))/params(18)*T(54)/(y(140)*y(12))));
g1_v(49)=(-((1-params(16))*y(138)))/(y(162)*y(162));
g1_v(50)=(-(params(16)*y(110)/y(158)));
g1_v(51)=1/(1-params(16));
g1_v(52)=1/(1-params(16));
g1_v(53)=1/(1-params(16));
g1_v(54)=(-((1-params(16))*y(135)))/(y(162)*y(162));
g1_v(55)=T(5)*getPowerDeriv(y(155),1+1/params(17),1)/(1+1/params(17));
g1_v(56)=1;
g1_v(57)=T(33)*T(52);
g1_v(58)=T(52);
g1_v(59)=T(52);
g1_v(60)=(1-params(16))/y(162);
g1_v(61)=(-(1/T(36)));
g1_v(62)=T(6)*getPowerDeriv(y(118),1+1/params(4),1)/(1+1/params(4));
g1_v(63)=1;
g1_v(64)=T(6)*getPowerDeriv(y(118),1/params(4),1);
g1_v(65)=T(56);
g1_v(66)=(-((1-params(16))*y(137)))/(y(160)*y(160))-T(7)*T(56)/y(119);
g1_v(67)=(-((params(16)*y(107)+params(16)*y(160)*T(56))/y(156)));
g1_v(68)=(-(T(47)*T(38)*T(46)*T(56)));
g1_v(69)=(-((1-params(16))*y(133)))/(y(160)*y(160))-T(9)*T(12)*T(56)/(y(139)*y(11));
g1_v(70)=(-1);
g1_v(71)=T(4);
g1_v(72)=T(3);
g1_v(73)=(-(T(7)*T(4)/y(119)));
g1_v(74)=(-(T(7)*T(3)/y(120)));
g1_v(75)=(-(T(3)*params(16)*y(161)/y(157)));
g1_v(76)=(-(params(16)*y(160)*T(4)/y(156)));
g1_v(77)=1-T(47)*(T(37)*T(3)*T(48)+T(38)*T(4)*T(46));
g1_v(78)=(-(T(4)*T(9)*T(12)/(y(139)*y(11))));
g1_v(79)=(-(T(3)*T(9)*T(12)/(y(140)*y(12))));
g1_v(80)=1;
g1_v(81)=(-(T(7)/y(122)));
g1_v(82)=(-(params(16)*y(162)/y(158)));
g1_v(83)=(-(T(9)*1/y(7)));
g1_v(84)=(-(T(9)*(1-y(149))));
g1_v(85)=(-(T(9)*T(12)/(y(141)*y(13))));
g1_v(86)=1;
g1_v(87)=(-(T(7)/y(122)));
g1_v(88)=(-(params(16)*y(162)/y(158)));
g1_v(89)=(-(T(9)*1/y(8)));
g1_v(90)=(-(T(9)*(1-y(150))));
g1_v(91)=(-(T(9)*T(12)/(y(141)*y(13))));
g1_v(92)=1;
g1_v(93)=(-(T(7)/y(122)));
g1_v(94)=(-(params(16)*y(162)/y(158)));
g1_v(95)=(-(T(9)*1/y(9)));
g1_v(96)=(-(T(9)*(1-y(151))));
g1_v(97)=(-(T(9)*T(12)/(y(141)*y(13))));
g1_v(98)=T(9);
g1_v(99)=T(9);
g1_v(100)=T(9);
g1_v(101)=1;
g1_v(102)=(-(y(164)*(-y(167))));
g1_v(103)=1;
g1_v(104)=(-(y(165)*(-y(168))));
g1_v(105)=1;
g1_v(106)=(-(y(166)*(-y(169))));
g1_v(107)=y(11);
g1_v(108)=1;
g1_v(109)=y(12);
g1_v(110)=1;
g1_v(111)=y(13);
g1_v(112)=1;
g1_v(113)=1;
g1_v(114)=(-(T(9)*y(111)*(-(params(10)/2*2*(y(167)-T(1))))));
g1_v(115)=(-params(10));
g1_v(116)=(-(y(164)*((-y(152))-params(10)/2*2*(y(167)-T(1)))));
g1_v(117)=1;
g1_v(118)=(-(T(9)*y(112)*(-(params(10)/2*2*(y(168)-T(1))))));
g1_v(119)=(-params(10));
g1_v(120)=(-(y(165)*((-y(153))-params(10)/2*2*(y(168)-T(1)))));
g1_v(121)=1;
g1_v(122)=(-(T(9)*y(113)*(-(params(10)/2*2*(y(169)-T(1))))));
g1_v(123)=(-params(10));
g1_v(124)=(-(y(166)*((-y(154))-params(10)/2*2*(y(169)-T(1)))));
g1_v(125)=(-(1-y(167)*y(152)-y(149)));
g1_v(126)=1;
g1_v(127)=y(146);
g1_v(128)=(-(1-y(168)*y(153)-y(150)));
g1_v(129)=1;
g1_v(130)=y(147);
g1_v(131)=(-(1-y(169)*y(154)-y(151)));
g1_v(132)=1;
g1_v(133)=y(148);
g1_v(134)=(-1);
g1_v(135)=(1-params(16))/y(160);
g1_v(136)=(-1);
g1_v(137)=(1-params(16))/y(161);
g1_v(138)=(-1);
g1_v(139)=(1-params(16))/y(162);
g1_v(140)=(-(T(15)*T(11)*T(17)*y(11)*T(49)));
g1_v(141)=(-(T(2)+params(8)*T(2)/2*2*(y(139)-1)));
g1_v(142)=y(164)*params(8)*T(2);
g1_v(143)=(-((-(y(11)*(y(107)+params(14)*(1-params(6))*(1-params(11))/params(18)*T(15))*T(9)*T(12)))/(y(139)*y(11)*y(139)*y(11))));
g1_v(144)=(-(T(22)*T(20)*T(23)*y(12)*T(50)));
g1_v(145)=(-(T(2)+params(8)*T(2)/2*2*(y(140)-1)));
g1_v(146)=y(165)*params(8)*T(2);
g1_v(147)=(-((-(y(12)*(y(108)+params(14)*params(6)*(1-params(11))/params(18)*T(22))*T(9)*T(12)))/(y(140)*y(12)*y(140)*y(12))));
g1_v(148)=(-(T(29)*T(27)*T(30)*y(13)*T(51)));
g1_v(149)=(-(T(2)+params(9)*T(2)/2*2*(y(141)-1)));
g1_v(150)=y(166)*params(9)*T(2);
g1_v(151)=(-((-(y(13)*(y(110)+params(11)*params(14)/params(18)*T(29))*T(9)*T(12)))/(y(141)*y(13)*y(141)*y(13))));
g1_v(152)=(-(T(43)*y(256)*y(268)*T(58)));
g1_v(153)=(-(T(44)*y(257)*y(269)*T(58)));
g1_v(154)=(-(T(45)*y(258)*y(270)*T(58)));
g1_v(155)=(-((y(237)*y(243)+y(268)*(1-y(247)))*T(58)));
g1_v(156)=(-((y(238)*y(244)+y(269)*(1-y(248)))*T(58)));
g1_v(157)=(-((y(239)*y(245)+y(270)*(1-y(249)))*T(58)));
g1_v(158)=1;
g1_v(159)=(-(T(42)*y(268)*T(43)));
g1_v(160)=(-(T(42)*y(269)*T(44)));
g1_v(161)=(-(T(42)*y(270)*T(45)));
g1_v(162)=(-(T(42)*(-y(268))));
g1_v(163)=(-(T(42)*(-y(269))));
g1_v(164)=(-(T(42)*(-y(270))));
g1_v(165)=(-(T(42)*y(268)*y(256)*2*y(271)));
g1_v(166)=(-(T(42)*y(269)*y(257)*2*y(272)));
g1_v(167)=(-(T(42)*y(270)*y(258)*2*y(273)));
g1_v(168)=(-(T(43)*T(42)*y(256)));
g1_v(169)=(-(T(42)*(1-y(247))));
g1_v(170)=(-(T(44)*T(42)*y(257)));
g1_v(171)=(-(T(42)*(1-y(248))));
g1_v(172)=(-(T(45)*T(42)*y(258)));
g1_v(173)=(-(T(42)*(1-y(249))));
g1_v(174)=(-(T(42)*y(243)));
g1_v(175)=(-(T(42)*y(244)));
g1_v(176)=(-(T(42)*y(245)));
g1_v(177)=(-(T(42)*y(237)));
g1_v(178)=(-(T(42)*y(238)));
g1_v(179)=(-(T(42)*y(239)));
g1_v(180)=(-(T(43)*y(256)*y(268)*T(41)*T(40)*1/y(163)));
g1_v(181)=(-(T(44)*y(257)*y(269)*T(41)*T(40)*1/y(163)));
g1_v(182)=(-(T(45)*y(258)*y(270)*T(41)*T(40)*1/y(163)));
g1_v(183)=(-((y(237)*y(243)+y(268)*(1-y(247)))*T(41)*T(40)*1/y(163)));
g1_v(184)=(-((y(238)*y(244)+y(269)*(1-y(248)))*T(41)*T(40)*1/y(163)));
g1_v(185)=(-((y(239)*y(245)+y(270)*(1-y(249)))*T(41)*T(40)*1/y(163)));
    if ~isoctave && matlab_ver_less_than('9.8')
        sparse_rowval = double(sparse_rowval);
        sparse_colval = double(sparse_colval);
    end
    g1 = sparse(sparse_rowval, sparse_colval, g1_v, 40, 120);
end
end
